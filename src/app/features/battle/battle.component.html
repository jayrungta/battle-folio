<!-- Loading overlay with retro boot sequence -->
<div class="loading-overlay" *ngIf="animationState === 'loading'" [class.flashing]="showFlashes">
  <div class="scanlines"></div>
</div>

<div class="battle-screen" 
     *ngIf="animationState !== 'loading'"
     [class.transition]="shouldAnimate && animationState === 'transition'" 
     [class.ready]="animationState === 'ready'">
  
  <!-- Battle Arena (Top Section) -->
  <div class="battle-arena">
    <!-- Opponent Section (Top) -->
    <div class="opponent-section">
      <div class="hp-box">
        <div class="hp-box-content">
          <div class="trainer-name-hp">{{ trainerName }}</div>
          <div class="hp-bar-container">
            <div class="hp-label">HP</div>
            <div class="hp-bar">
              <div class="hp-fill"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="opponent-trainer" 
           [class.animate-entrance]="shouldAnimate && (animationState === 'challenge' || animationState === 'ready')">
        <img [src]="trainerSprite" alt="Trainer" class="trainer-sprite">
      </div>
    </div>
  </div>

  <!-- Battle Message Box (Bottom Section) -->
  <div class="battle-message-box" 
       [class.animate-entrance]="shouldAnimate && (animationState === 'transition' || animationState === 'challenge' || animationState === 'ready')">
    
    <!-- Left Half: Message or Empty Space -->
    <div class="left-section">
      <!-- "Wants to Battle" Message - Only show during challenge phase -->
      <div class="battle-challenge" 
           *ngIf="animationState === 'challenge'">
        <div class="message-text">A wild {{ trainerName }} appeared!</div>
        <div class="message-arrow">â–¼</div>
      </div>
      
      <!-- "What will you do?" Message - Only show when menu is ready -->
      <div class="battle-prompt" 
           *ngIf="animationState === 'ready'">
        <div class="prompt-text">What will you do?</div>
      </div>
    </div>

    <!-- Right Half: Battle Menu -->
    <div class="right-section">
      <div class="battle-menu-container" 
           *ngIf="animationState === 'ready'"
           [class.animate-entrance]="shouldAnimate && animationState === 'ready'">
        <app-battle-menu 
          [options]="battleOptions" 
          [disabled]="animationState !== 'ready'"
          [animateEntrance]="shouldAnimate && animationState === 'ready'">
        </app-battle-menu>
      </div>
    </div>
  </div>
</div>
